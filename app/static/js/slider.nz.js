!function(a,b){var c=function(){var a="WebkitTransform"in document.documentElement.style?!0:!1;return a},d=function(){var a,b=!1,c=document.createElement("div"),a=["&#173;",'<style id="smodernizr">',"@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}","</style>"].join(""),d=document.documentElement.style;return c.id="modernizr",c.innerHTML+=a,document.body.appendChild(c),"WebkitPerspective"in d&&"webkitPerspective"in d&&(b=9===c.offsetLeft&&3===c.offsetHeight),c.parentNode.removeChild(c),b},e=d?"translate3d(":"translate(",f=d?",0)":")",g=function(a,b){for(var c in b)a.style[c]=b[c]},h=function(a,b){a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?:\\s|$)","ig")," ").trim()},i=function(a,b){var c=new RegExp("(?:^|\\s)"+b+"(?:\\s|$)"),d=a.className;c.test(d)||(a.className=d+" "+b)},j=function(a,b){if(!a)return null;b?b.container=a:b="string"==typeof a?{container:a}:a;var c={container:".slider",wrap:null,panel:null,trigger:null,activeTriggerCls:"sel",hasTrigger:!1,steps:0,left:0,visible:1,margin:0,curIndex:0,duration:300,loop:!1,play:!1,interval:5e3,useTransform:d?!0:!1,lazy:".lazyimg",lazyIndex:1,callback:null,prev:null,next:null,activePnCls:"none"};for(var e in b)this[e]=b[e],delete c[e];for(var e in c)this[e]=c[e];"string"==typeof this.container&&(this.container=document.querySelector(this.container)),this.findEl()&&this.init()&&this.increaseEvent()};j.prototype=Object.create({reset:function(a){this.loop&&(this._oldLoop=!0),a=a||{};for(var b in a)this[b]=a[b];this.init()},initEl:function(a){return null!==a&&void 0!==a?"string"==typeof a?this.container.querySelector(a):a:void 0},findEl:function(){var a=this.container;return this.wrap=this.initEl(this.wrap||a.children[0]),this.wrap?(this.panel=this.initEl(this.panel||this.wrap.children[0]),this.panel?(this.panels=this.panel.children,this.panels.length?(this.trigger=this.initEl(this.trigger),this.prev=this.initEl(this.prev),this.next=this.initEl(this.next),this):(this.container.display="none",null)):null):null},init:function(){var a=this.wrap,b=this.panel,e=this.panels,f=this.trigger,h=this.len=e.length,i=this.margin,j=0,k=this.visible,l=this.useTransform=c?this.useTransform:!1;this.steps=this.steps||a.clientWidth,[].forEach.call(e,function(a){j+=a.offsetWidth}),i&&"number"==typeof i&&(j+=(h-1)*i,this.steps+=i),k>1&&(this.loop=!1),l&&(d&&g(a,{"-webkit-transform":"translateZ(0)"}),g(b,{"-webkit-backface-visibility":"hidden"}));var m=this._pages=Math.ceil(h/k);if(this._minpage=0,this._maxpage=this._pages-1,this.loadImg(),this.updateArrow(),1>=m)return this.getImg(e[0]),f&&(f.style.display="none"),null;if(this._oldLoop){var n=b.children;n.removeChild(n.length-2),n.removeChild(n.length-1)}if(this.loop){b.appendChild(e[0].cloneNode(!0));var o=e[h-1].cloneNode(!0);b.appendChild(o),this.getImg(o),o.style.cssText+="position:relative;left:"+-this.steps*(h+2)+"px;",j+=e[0].offsetWidth,j+=e[h-1].offsetWidth}if(g(b,{width:j+"px"}),f){var p="",q=f.children;if(!q.length){for(var r=0;m>r;r++)p+="<span"+(r==this.curIndex?" class="+this.activeTriggerCls:"")+"></span>";f.innerHTML=p}this.triggers=f.children,this.triggerSel=this.triggers[this.curIndex]}else this.hasTrigger=!1;return this.slideTo(this.curIndex),this},increaseEvent:function(){var a=this,b=a.wrap,c=a.prev,d=a.next,e=a.triggers;b.addEventListener&&(b.addEventListener("touchstart",a,!1),b.addEventListener("touchmove",a,!1),b.addEventListener("touchend",a,!1),b.addEventListener("webkitTransitionEnd",a,!1),b.addEventListener("msTransitionEnd",a,!1),b.addEventListener("oTransitionEnd",a,!1),b.addEventListener("transitionend",a,!1)),a.play&&a.begin(),c&&(this.prevHandler=function(b){a.backward.call(a,b)},c.addEventListener("click",this.prevHandler,!1)),d&&(this.nextHandler=function(b){a.forward.call(a,b)},d.addEventListener("click",this.nextHandler,!1)),a.hasTrigger&&e.length&&(a.triggerHandler=[],[].forEach.call(e,function(b,c){var d=function(){a.slideTo(c)};a.triggerHandler.push(d),b.addEventListener("click",d,!1)}))},handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":case"touchcancel":this.end(a);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(a)}},loadImg:function(a){a=a||0,a<this._minpage?a=this._maxpage:a>this._maxpage&&(a=this._minpage);var b=this.visible,c=this.lazyIndex-1,d=c+a;if(!(d>this._maxpage)){d+=1;var e=(a&&c+a||a)*b,f=d*b,g=this.panels;f=Math.min(g.length,f);for(var h=e;f>h;h++)this.getImg(g[h])}},getImg:function(a){if(!a.getAttribute("l")){var b=this,c=b.lazy,d="img"+c;c=c.replace(/^[.#]/g,""),[].forEach.call(a.querySelectorAll(d),function(a){var b=a;src=b.getAttribute("dataimg"),src&&(b.setAttribute("src",src),b.removeAttribute("dataimg"),h(b,c))}),a.setAttribute("l","1")}},start:function(a){var b=a.touches[0];this._movestart=void 0,this._disX=0,this._coord={x:b.pageX,y:b.pageY}},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){var b,c=a.touches[0],d=this._disX=c.pageX-this._coord.x,e=this.left;"undefined"==typeof this._movestart&&(this._movestart=!!(this._movestart||Math.abs(d)<Math.abs(c.pageY-this._coord.y))),this._movestart||(a.preventDefault(),this.stop(),this.loop||(d/=!this.curIndex&&d>0||this.curIndex==this._maxpage&&0>d?Math.abs(d)/this.steps+1:1),b=e-this.curIndex*this.steps+d,this.setCoord(this.panel,b),this._disX=d)}},end:function(a){if(!this._movestart){var b=this._disX;-10>b?(a.preventDefault(),this.forward()):b>10&&(a.preventDefault(),this.backward()),b=null}},backward:function(a){a&&a.preventDefault&&a.preventDefault();var b=this.curIndex,c=this._minpage;b-=1,c>b&&(b=this.loop?c-1:c),this.slideTo(b),this.callback&&this.callback(Math.max(b,c),-1)},forward:function(a){a&&a.preventDefault&&a.preventDefault();var b=this.curIndex,c=this._maxpage;b+=1,b>c&&(b=this.loop?c+1:c),this.slideTo(b),this.callback&&this.callback(Math.min(b,c),1)},setCoord:function(a,b){this.useTransform?g(a,{"-webkit-transform":e+b+"px,0"+f}):g(a,{left:b+"px"})},slideTo:function(a,b){a=a||0,this.curIndex=a;var c=this.panel,d=c.style,e=this.left-a*this.steps;d.webkitTransitionDuration=d.MozTransitionDuration=d.msTransitionDuration=d.OTransitionDuration=d.transitionDuration=(b||this.duration)+"ms",this.setCoord(c,e),this.loadImg(a)},transitionEnd:function(){var a=this.panel,b=a.style,c=this.loop,d=this.curIndex;c&&(d>this._maxpage?this.curIndex=0:d<this._minpage&&(this.curIndex=this._maxpage),this.setCoord(a,this.left-this.curIndex*this.steps)),c||d!=this._maxpage?this.begin():(this.stop(),this.play=!1),this.update(),this.updateArrow(),b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=0},update:function(){var a=this.triggers,b=this.activeTriggerCls,c=this.curIndex;a&&a[c]&&(this.triggerSel&&(this.triggerSel.className=""),a[c].className=b,this.triggerSel=a[c])},updateArrow:function(){var a=this.prev,b=this.next;if(a&&a.length&&b&&b.length&&!this.loop){var c=this.curIndex,d=this.activePnCls;0>=c?i(a,d):h(a,d),c>=this._maxpage?i(b,d):h(b,d)}},begin:function(){var a=this;a.play&&!a._playTimer&&(a.stop(),a._playTimer=setInterval(function(){a.forward()},a.interval))},stop:function(){var a=this;a.play&&a._playTimer&&(clearInterval(a._playTimer),a._playTimer=null)},destroy:function(){var a=this,b=a.wrap[0],c=a.prev,d=a.next,e=a.triggers;b.removeEventListener&&(b.removeEventListener("touchstart",a,!1),b.removeEventListener("touchmove",a,!1),b.removeEventListener("touchend",a,!1),b.removeEventListener("webkitTransitionEnd",a,!1),b.removeEventListener("msTransitionEnd",a,!1),b.removeEventListener("oTransitionEnd",a,!1),b.removeEventListener("transitionend",a,!1)),c&&c.removeEventListener("click",this.prevHandler,!1),d&&d.removeEventLIstener("click",this.nextHandler,!1),a.hasTrigger&&e.length&&[].forEach.call(e,function(b){b.removeEventListener("click",a.triggerHandler.shift(),!1)})},attachTo:function(a,b){[].forEach.call(a,function(a){a.getAttribute("l")||(a.setAttribute("l",!0),j.cache.push(new j(a,b)))})}}),j.cache=[],j.destroy=function(){var a=j.cache,b=a.length;if(!(1>b)){for(var c=0;b>c;c++)a[c].destroy();j.cache=[]}},b.Slider=j}(window,window.lib||(window.lib={}));